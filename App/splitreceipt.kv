#:import Factory kivy.factory.Factory

ScreenManager:
    MainScreen:
    GridScreen:
<MainScreen>:
    orientation: 'vertical'
    
    #--- Whole screen
    BoxLayout:
        id: mn_bxlt
        orientation: 'vertical'

        #--- Go to GridScreen
        Button:
            id: to_grscreen_btn
            text: "Go to Grid Screen"
            on_release: root.switch_to_grid_screen()
            size_hint_y: 0.1

        #--- Below button
        BoxLayout:
            id: mn_sub_bxlt
            orientation: 'horizontal'
            size_hint_y: 0.9

            #--- Left layout
            BoxLayout:
                id: mn_left_bxlt
                orientation: 'vertical'
                size_hint_x: 0.6
                spacing: 10
                padding: 10

                #--- Left Scrollview 
                ScrollView:
                    id: mn_left_scview
                    do_scroll_y: True
                    size_hint_y: 0.6

                    GridLayout:
                        id: mn_left_scview_grdlt
                        cols: 3
                        orientation: 'lr-tb'
                        size_hint_y: None
                        height: self.minimum_height

                #--- Subtotal row
                BoxLayout:
                    id: mn_left_sbtotal_bxlt
                    orienation: 'horizontal'
                    size_hint_y: 0.05

                    Label:
                        id: mn_left_sbtotal_label_desc
                        text: "Sub Total: $"

                    Label:
                        id: mn_left_sbtotal_label_price
                        text: "0.00"

                #--- Tax row
                BoxLayout:
                    id: mn_left_sbtotal_bxlt
                    size_hint_y: 0.05
                    orientation: 'horizontal'

                    Label:
                        id: mn_left_tax_label_desc
                        text: "Tax $:"

                    Button:
                        id: mn_left_tax_txinput
                        text: "0.00"
                        on_release: root.update_tax_popup()
                        
                #--- Tip row
                BoxLayout:
                    id: mn_left_tip_bxlt
                    orientation: 'horizontal'
                    size_hint_y: 0.05
                    
                    Label:
                        id: mn_left_tip_label_desc
                        text: "Tip $:"

                    Button:
                        id: mn_left_tip_txinput
                        text: "0.00"
                        on_release: root.update_tip_popup()
                        
                #--- Grand Total row
                BoxLayout:
                    id: mn_left_grtotal_bxlt
                    orientation: 'horizontal'
                    size_hint_y: 0.05

                    Label:
                        id: mn_left_grtotal_label_desc
                        text: "Grand Total: $"

                    Label:
                        id: mn_left_grtotal_label_price
                        text: "0.00"

                #--- Add Item row
                Button:
                    id: mn_left_additem_btn
                    text: "Add Item"
                    on_release: root.additem_popup()
                    size_hint_y: 0.1
                
                Button:
                    id: mn_left_clear_btn
                    text: "Clear Items"
                    on_release: root.clear_left_items()
                    size_hint_y: 0.1

            #--- Right Layout
            BoxLayout:
                id: mn_right_bxlt
                orientation: 'vertical'
                size_hint_x: 0.4
                spacing: 10
                padding: 10

                ScrollView:
                    id: mn_right_scview
                    do_scroll_y: True
                    size_hint_y: 0.8

                    GridLayout:
                        id: mn_right_scview_grdlt
                        cols: 1
                        orientation: 'tb-lr'
                        size_hint_y: None
                        height: self.minimum_height

                Button:
                    id: mn_right_addprsn_btn
                    text: "Add Person"
                    on_release: root.addperson_popup()
                    size_hint_y: 0.1

                Button:
                    id: mn_right_clear_btn
                    text: "Clear Persons"
                    on_release: root.clear_right_items()
                    size_hint_y: 0.1
<GridScreen>:
    orientation: 'vertical'

    #--- Whole Screen
    BoxLayout:
        id: grd_bxlt
        orientation: 'vertical'
        
        #---Go to MainScreen
        Button:
            id: to_mnscreen_btn
            text: "Go to Main Screen"
            on_release: app.root.current = "main_screen"
            size_hint_y: 0.11111

        #--- Below button
        BoxLayout:
            id: grd_sub_bxlt
            orientation: 'horizontal'

            #--- Left Layout
            BoxLayout:
                id: grd_left_bxlt
                orientation: 'vertical'
                size_hint_x: 0.5

                #--- Left Header
                GridLayout:
                    id: grd_left_hdr_grdlt
                    cols: 3
                    size_hint_y: 0.0769

                    Label:
                        id: grd_left_hdr_label_desc
                        text: 'Item'
                        size_hint_x: 0.5
                    Label:
                        id: grd_left_hdr_label_price
                        text: 'Price'
                        size_hint_x: 0.25
                    Label:
                        id: grd_left_hdr_label_qty
                        text: 'Qty'
                        size_hint_x: 0.25

                #--- Left Scroll
                ScrollView:
                    id: grd_left_scview
                    grd_right_scview: grd_right_scview

                    do_scroll_y: True
                    scroll_y: self.grd_right_scview.scroll_y
                    size_hint_y: 1

                    GridLayout:
                        id: grd_left_scview_grdlt
                        cols: 1
                        size_hint_y: None
                        orientation: 'lr-tb'
                        height: self.minimum_height

                #--- Bottom Layout
                BoxLayout:
                    id: grd_left_ftr_bxlt
                    orientation: 'vertical'
                    size_hint_y: 0.3076

                    #--- Sub Total 
                    BoxLayout:
                        id: grd_left_ftr_sbtotal_bxlt
                        orientation: 'horizontal'
                        
                        Label:
                            id: grd_left_ftr_sbtotal_label_desc
                            text: "Sub Total"
                            size_hint_x: 0.5
                        Label:
                            id: grd_left_ftr_sbtotal_label_total
                            text: "0.00"
                            size_hint_x: 0.25
                        Label:
                            id: grd_left_ftr_sbtotal_label_bal
                            text: "0.00"
                            size_hint_x: 0.25

                    #--- Tax 
                    BoxLayout:
                        id: grd_left_ftr_tax_bxlt
                        orientation: 'horizontal'
                        
                        Label:
                            id: grd_left_ftr_tax_label_desc
                            text: "Tax"
                            size_hint_x: 0.5
                        Label:
                            id: grd_left_ftr_tax_label_total
                            text: "0.00"
                            size_hint_x: 0.25
                        Label:
                            id: grd_left_ftr_tax_label_bal
                            text: "0.00"
                            size_hint_x: 0.25

                    #--- Tip 
                    BoxLayout:
                        id: grd_left_ftr_tip_bxlt
                        orientation: 'horizontal'

                        Label:
                            id: grd_left_ftr_tip_label_desc
                            text: "Tip"
                            size_hint_x: 0.5
                        Label:
                            id: grd_left_ftr_tip_label_total
                            text: "0.00"
                            size_hint_x: 0.25
                        Label:
                            id: grd_left_ftr_tip_label_bal
                            text: "0.00"
                            size_hint_x: 0.25

                    #--- Grand Total 
                    BoxLayout:
                        id: grd_left_ftr_grtotal_bxlt
                        orientation: 'horizontal'
                        
                        Label:
                            id: grd_left_ftr_grtotal_label_desc
                            text: "Grand Total"
                            size_hint_x: 0.5
                        Label:
                            id: grd_left_ftr_grtotal_label_total
                            text: "0.00"
                            size_hint_x: 0.25
                        Label:
                            id: grd_left_ftr_grtotal_label_bal
                            text: "0.00"
                            size_hint_x: 0.25

            #--- Right Layout   
            BoxLayout:
                id: grd_right_bxlt
                orientation: 'vertical'
                size_hint_x: 0.5
                #--- Header 
                ScrollView:
                    id: grd_right_hdr_scview
                    grd_right_scview: grd_right_scview

                    do_scroll_x: True
                    do_scroll_y: False
                    scroll_x: self.grd_right_scview.scroll_x
                    size_hint_y: 0.0769
                    
                    GridLayout:
                        id: grd_right_hdr_scview_grdlt
                        cols: 1
                        size_hint_y: None
                        size_hint_x: None
                        height: self.minimum_height
                        width: self.minimum_width

                #--- Mid Scrollview GridLayout 
                ScrollView:
                    id: grd_right_scview
                    grd_left_scview: grd_left_scview

                    do_scroll_y: True
                    do_scroll_x: True
                    scroll_y: self.grd_left_scview.scroll_y
                    size_hint_y: 1

                    GridLayout:
                        id: grd_right_scview_grdlt
                        cols: 1
                        orientation: 'lr-tb'
                        size_hint_y: None
                        size_hint_x: None
                        height: self.minimum_height
                        width: self.minimum_width

                #--- Footer 
                ScrollView:
                    id: grd_right_ftr_scview
                    grd_right_scview: grd_right_scview
                    
                    do_scroll_x: True
                    do_scroll_y: False
                    scroll_x: self.grd_right_scview.scroll_x
                    size_hint_y: 0.3076

                    GridLayout:
                        id: grd_right_ftr_scview_grdlt
                        cols: 1
                        orientation: 'lr-tb'
                        size_hint_y: None
                        size_hint_x: None
                        height: self.minimum_height
                        width: self.minimum_width

